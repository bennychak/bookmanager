<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>黄金屋</title>
    <script src="https://weui.io/zepto.min.js"></script>
    <script src="./weui.min.js"></script>
    <link rel="stylesheet" href="./weui.min.css" />
    <link rel="stylesheet" href="./styles.css" />
</head>
<body>
    <a href="javascript:" role="button" class="weui-btn weui-btn_default" id="showDialog1" wah-hotarea="click">样式一</a>
    <div style="opacity:0; position: absolute; width:1px;height:1px; overflow:hidden;"><img src="repeat.svg" /></div>
    <div class="container">
        <h1 onclick="resetSearch()">
            <img class="imggg" src="./gg.jpg" />
            <img class="imgpp" src="./pp.jpg" />
            <span id="book-total" class="book-total"></span><span id="search-result-total" class="search-result-total"></span>
        </h1>
        <form class="search-form">
            <input type="text" maxlength="16" id="search-input" required />
            <span class="placeholder">请输入图书信息，如书名、出版社、作者、类别、ISBN/书号、中图分类号、LCC等</span>
            <button type="button" onclick="searchBooks()" style="box-sizing: border-box;">查询</button>
            <span onclick="randomSearch();this.style.display = 'none'; document.getElementById('refreshReset').style.display = 'block';" id="refreshRandom" class="refresh" title="随机排序"></span>
            <span onclick="sortSearch();resetSearch();this.style.display = 'none'; document.getElementById('refreshRandom').style.display = 'block';" id="refreshReset" class="refresh" style="display:none;background-image:url(./repeat.svg); background-size:70%" title="按新得到顺序排序"></span>
        </form>
        <div class="book-list-container">
            <div id="book-cards" class="book-cards"></div>
        </div>
        <div class="divide">Private database &copy; 东方 localhost81 Blog 2007-2024<br />北京/郑州/太原实体并库，UI Framework by 通义千问<br />部分图书简介由AI生成，仅供参考</div>
    </div>
    <div class="pagination">
        <button type="button" id="prev-page" onclick="changePage(-1)">上一页</button>
        <span id="page-info">1 / 1</span>
        <button type="button" id="next-page" onclick="changePage(1)">下一页</button>
    </div>

    <div id="dialogs">
        <div id="dialogWrap1" class="js_dialog_wrap" ref="showDialog1" aria-labelledby="js_title1" role="dialog" aria-modal="false" aria-hidden="true" style="display: none;">
            <div id="mask1" class="js_close weui-mask"></div>
            <div id="js_dialog_1" class="js_dialog weui-half-screen-dialog">
                <div class="weui-half-screen-dialog__hd">
                  <div class="weui-half-screen-dialog__hd__side">
                    <button class="js_close weui-btn_icon weui-wa-hotarea">关闭<i class="weui-icon-close-thin"></i></button>
                  </div>
                  <div class="weui-half-screen-dialog__hd__main">
                    <strong class="weui-half-screen-dialog__title" id="js_title1">标题</strong>
                    <span class="weui-half-screen-dialog__subtitle">副标题</span>
                  </div>
                </div>
                <div class="weui-half-screen-dialog__bd">
                  <br>
                  <br>
                  可放自定义内容
                  <br>
                  <br>
                  <br>
                  <br>
                </div>
            </div>
        </div>
    </div>

    <script src="books.js"></script>
    <script src="app.js"></script>
    <script>
    const $dialog1 = $('#js_dialog_1');
    const $dialogWrap1 = $('#dialogWrap1');

    function closeDialog(o){
      const $jsDialogWrap = o.parents('.js_dialog_wrap');
      $jsDialogWrap.attr('aria-hidden','true').attr('aria-modal','false').removeAttr('tabindex');
      $jsDialogWrap.fadeOut(300);
      $jsDialogWrap.find('.js_dialog').removeClass('weui-half-screen-dialog_show');
      setTimeout(function(){
        $('#' + $jsDialogWrap.attr('ref')).trigger('focus');
      }, 300);
    }

    // 阻止弹窗内部滚动冒泡
    $('.js_dialog_wrap').on('touchmove', function(e) {
        if($.contains(document.getElementById('js_wrap_content'), e.target)){
        } else {
          e.preventDefault();
        }
    });

    $('.js_close').on('click', function() {
      closeDialog($(this));
    });

    $(function(){
        $('#showDialog1').on('click', function(){
          $dialogWrap1.fadeIn(200);
          $dialog1.addClass('weui-half-screen-dialog_show');
          setTimeout(function(){
            $dialogWrap1.attr('aria-hidden','false');
            $dialogWrap1.attr('aria-modal','true');
            $dialogWrap1.attr('tabindex','0');
            $dialogWrap1.trigger('focus');
          },200)
        });
    });
    </script>
</body>
</html>